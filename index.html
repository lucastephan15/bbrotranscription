<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizador Detalhado de Transcrição de Reunião</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.4/axios.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; max-width: 800px; margin: auto; }
        h1 { text-align: center; }
        textarea, input[type="password"] { width: 100%; margin-bottom: 10px; }
        textarea { height: 200px; }
        button { display: block; width: 100%; padding: 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer; margin-bottom: 10px; }
        #resultado { margin-top: 20px; white-space: pre-wrap; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Organizador Detalhado de Transcrição de Reunião</h1>
    <input type="password" id="apiKey" placeholder="Insira sua chave de API da OpenAI aqui" />
    <textarea id="transcricao" placeholder="Cole a transcrição da reunião aqui..."></textarea>
    <button onclick="organizarTranscricao()">Organizar Transcrição Detalhadamente</button>
    <div id="resultado"></div>

    <script>
        async function organizarTranscricao() {
            const apiKey = document.getElementById('apiKey').value;
            const transcricao = document.getElementById('transcricao').value;
            const resultado = document.getElementById('resultado');
            
            if (!apiKey) {
                resultado.innerHTML = '<span class="error">Por favor, insira sua chave de API da OpenAI.</span>';
                return;
            }
            
            if (!transcricao) {
                resultado.innerHTML = '<span class="error">Por favor, insira a transcrição da reunião.</span>';
                return;
            }

            resultado.textContent = 'Processando...';

            try {
                const response = await axios.post('https://api.openai.com/v1/chat/completions', {
                    model: "gpt-4o",
                    messages: [{
                        role: "system",
                        content: "Você é um assistente especializado em organizar e resumir transcrições de reuniões. Seu objetivo é criar um documento estruturado e detalhado que capture a essência da reunião."
                    }, {
                        role: "user",
                        content: `Por favor, analise a seguinte transcrição de reunião e crie um documento detalhado que:

1. Liste os principais tópicos discutidos.
2. Para cada tópico, forneça:
   - Um título claro e conciso
   - Uma breve explicação do que foi discutido (2-3 frases)
   - Pontos-chave ou decisões tomadas (se houver)
   - Nomes dos participantes envolvidos na discussão desse tópico (se mencionados)

3. Organize o documento com títulos, subtítulos e marcadores para fácil leitura.
4. Se houver, inclua uma seção de "Próximos Passos" ou "Ações Futuras" no final.

Transcrição da reunião:

${transcricao}`
                    }],
                    temperature: 0.7,
                    max_tokens: 1000  // Aumentado para permitir respostas mais longas
                }, {
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    }
                });

                resultado.textContent = response.data.choices[0].message.content;
            } catch (error) {
                console.error('Erro detalhado:', error);
                let errorMessage = 'Ocorreu um erro ao processar a transcrição. ';
                if (error.response) {
                    errorMessage += `Erro ${error.response.status}: ${error.response.data.error.message}`;
                } else if (error.request) {
                    errorMessage += 'Não foi possível conectar ao servidor. Verifique sua conexão com a internet.';
                } else {
                    errorMessage += error.message;
                }
                resultado.innerHTML = `<span class="error">${errorMessage}</span>`;
            }
        }
    </script>
</body>
</html>